# 网络协议

![](https://user-gold-cdn.xitu.io/2020/5/23/17240ccf5257ecd8?imageslim)

## TCP

>   传输控制协议（TCP，Transmission Control Protocol）是一种面向连接、可靠的、基于字节流的传输层通信协议，由 IETF 的 RFC 793 定义。

*   基于流的设计
*   面向连接
*   丢包重传
*   保证数据顺序



## UDP

>   Internet 协议集支持一个无连接的传输协议，该协议称为用户数据报协议（UDP，User Datagram Protocol）。UDP 为应用程序提供了一种无需建立连接就可以发送封装的 IP 数据包的方法。RFC 768 描述了 UDP。

*   UDP 是非连接协议，也就是不会和终端建立连接
*   UDP 包信息只有 8 个字节
*   UDP 是面向报文的。既不拆分，也不合并，而是保留这些报文的边界
*   UDP 可能丢包
*   UDP 不保证数据顺序



## HTTP

-   HTTP/0.9：GET，无状态的特点形成
-   HTTP/1.0：支持 POST，HEAD，添加了请求头和响应头，支持任何格式的文件发送，添加了状态码、多字符集支持、多部分发送、权限、缓存、内容编码等
-   HTTP/1.1：默认长连接，同时 6 个 TCP 连接，CDN 域名分片
-   HTTPS：HTTP + TLS（ **非对称加密** 与 **对称加密** ）
    1.  客户端发出 https 请求，请求服务端建立 SSL 连接
    2.  服务端收到 https 请求，申请或自制数字证书，得到公钥和服务端私钥，并将公钥发送给客户端
    3.  户端验证公钥，不通过验证则发出警告，通过验证则产生一个随机的客户端私钥
    4.  客户端将公钥与客户端私钥进行对称加密后传给服务端
    5.  服务端收到加密内容后，通过服务端私钥进行非对称解密，得到客户端私钥
    6.  服务端将客户端私钥和内容进行对称加密，并将加密内容发送给客户端
    7.  客户端收到加密内容后，通过客户端私钥进行对称解密，得到内容
-   HTTP/2.0：多路复用（一次 TCP 连接可以处理多个请求），服务器主动推送，stream 传输。
-   HTTP/3：基于 UDP 实现了 QUIC 协议
    -   建立好 HTTP2 连接
    -   发送 HTTP2 扩展帧
    -   使用 QUIC 建立连接
    -   如果成功就断开 HTTP2 连接
    -   升级为 HTTP3 连接

**注：RTT = Round-trip time**

